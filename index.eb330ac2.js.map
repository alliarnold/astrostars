{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-307e2318e7c02ca9.js","src/js/heatmap.js","node_modules/@parcel/runtime-js/lib/runtime-5cd7336c7a554df2.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"6gptW\\\":\\\"index.eb330ac2.js\\\",\\\"kC063\\\":\\\"heat.8830b7df.csv\\\",\\\"3Dy7v\\\":\\\"circlepack.cb0ac2e4.js\\\"}\"));","import * as d3 from \"d3\";\nimport heat from 'url:../../data/heat.csv';\n\nfunction renderData(dataElements) {\n\n    //dims\n    let width = window.innerWidth * .8;\n    let height = window.innerHeight;\n    let margin = ({ top: 40, right: 0, bottom: 0, left: 40 })\n\n    //variables and data structure\n    let signs = new Set(dataElements.map(d => d.source));\n    let sentiments = new Set(dataElements.map(d => d.target));\n    let dataset = dataElements.map(d => ({sign: d.source, sentiment: d.target, value: d.value}));\n\n    //xscale\n    let x = d3.scaleBand()\n        .domain(sentiments)\n        .range([margin.left, width-margin.left])\n        .padding(1);\n    \n    //yscale\n    let y = d3.scaleBand()\n        .domain(signs)\n        .range([height-margin.top, margin.top])\n        .padding(1);\n\n    const container = d3.select(\"#heatmap\")\n        .style(\"position\", \"relative\");\n    \n    const svg = container\n        .append(\"svg\")\n        .attr(\"viewBox\", [-15, -30, width, height])\n        .style(\"background\", \"#70238c\" );\n\n    xAxis = d3.axisTop(x).tickSize(0);\n\n    const tooltip = container\n        .append(\"div\")\n        .data(dataset)\n        .style(\"opacity\", 0)\n        .style(\"position\", \"absolute\")\n        .attr(\"class\", \"tooltip\")\n        .style(\"background-color\", \"white\")\n        .style(\"border\", \"solid\")\n        .style(\"border-width\", \"2px\")\n        .style(\"border-radius\", \"5px\")\n        .style(\"border-color\", \"#70238c\")\n\n    svg.append(\"g\")\n        .style(\"font-size\", 15)\n        .style(\"color\", \"#fbf7fc\")\n        .attr(\"transform\", `translate(0,${margin.top})`)\n        .call(xAxis)\n        .call(g => g.select(\".domain\").remove())\n        .selectAll(\"text\")\t\n        .style(\"text-anchor\", \"start\")\n        .attr(\"transform\", \"rotate(-35)\")\n        .select(\".domain\").remove()\n\n    svg.append(\"g\")\n        .style(\"font-size\", 15)\n        .style(\"color\", \"#faf0fc\")\n        .attr(\"transform\", `translate(${margin.left+15},0)`)\n        .call(d3.axisLeft(y).tickSize(0))\n        .select(\".domain\").remove();\n\n    let colorZ = d3.scaleLinear()\n        .range([\"#70238c\",\"#fcf7fc\"])\n        .domain([0, 72]);\n\n\n    const mouseover = function(d, i) {\n            d3.select(this)\n            .style(\"stroke-width\", 8)\n            .style(\"stroke\", \"white\")\n            .transition()\n                .duration(10)\n                .style(\"stroke-width\", 6)\n            .style(\"stroke\", \"#fbf7fc\")\n            .transition()\n                .duration(10)\n                .style(\"stroke-width\", 4)\n                .style(\"stroke\", \"#fcfcf0\")\n            .transition()\n                .duration(10)\n                .style(\"stroke-width\", 3)\n                .style(\"stroke\", \"#f5d7fc\")\n            .transition()\n                .duration(10)\n                .style(\"stroke-width\", 1)\n                .style(\"stroke\", \"white\")\n            \n            tooltip.style(\"opacity\", 1)\n                .html(`${d3.select(this).attr(\"sign\")} scored ${d3.select(this).attr(\"data-valval\")} points for \"${d3.select(this).attr(\"sentiment\")}\"`)  \n                    .style(\"left\", d3.select(this).attr(\"cx\") + \"px\")\n                    .style(\"top\", d3.select(this).attr(\"cy\")+ \"px\");\n            };\n\n    const mouseleave = function (d) {\n        d3.select(this)\n            .style(\"stroke\", \"none\")\n\n        tooltip.style(\"opacity\", 0)\n        };\n\n    svg.append(\"g\")\n        .selectAll()\n        .data(dataset, d => { return d.sign + ':' + d.sentiment;})\n        .enter()\n        .append(\"circle\")\n        .attr('data-valval', d=> d.value)\n        .attr(\"sign\", d=> d.sign)\n        .attr(\"sentiment\", d=> d.sentiment)\n        .attr(\"cx\", d => x(d.sentiment))\n        .attr(\"cy\", d => y(d.sign))\n        .attr(\"r\", 15)\n        .style(\"fill\", d => colorZ(d.value))\n        .style(\"opacity\", 0)\n        .on(\"mouseover\", mouseover)\n        .on(\"mouseleave\", mouseleave)\n        .transition()\n        .duration(100)\n        .delay((d,i) => i*25)\n        .style(\"opacity\", 1);\n};\n\nd3.csv(heat).then(data => {\n    console.log(\"loaded data: \", data);\n    renderData(data)\n});","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"kC063\")).toString();"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$2YFJl","$e2a03109727622b5$exports","URL","resolve","url","toString","csv","$parcel$interopDefault","then","data","console","log","dataElements","width","window","innerWidth","height","innerHeight","margin","signs","Set","map","d","source","sentiments","target","dataset","sign","sentiment","value","x","scaleBand","domain","range","padding","y","container","select","style","svg","append","attr","xAxis","axisTop","tickSize","tooltip","call","g","remove","selectAll","axisLeft","colorZ","scaleLinear","enter","on","this","transition","duration","html","delay","$ac4d43ced12cb6ea$var$renderData"],"version":3,"file":"index.eb330ac2.js.map"}